### Дипломная работа по направлению Android-разработчик

#### Приложение “Мессенджер”

Задачей является разработка мобильного приложения - мессенджера.

Приложение должно быть простым и понятным в использовании. Оно может состоять из нескольких фрагментов и активити. Программа позволяет переписываться с другими пользователями, отправлять фото, редактировать свой профиль и просматривать профили других пользователей.

Хранение и обмен данными осуществляется при помощи Firebase. Push-уведомления реализуются при помощи Firebase Cloud Messaging и Retrofit.

https://firebase.google.com

Подключение Firebase:

Нам понадобится следующий функционал Firebase:

1. Realtime database (хранение данных)

2. Storage (хранение медиа)

3. Authentication (Email/Password) (регистрация пользователей)

4. Firebase Cloud Messaging (Push-уведомления)

Подключить Firebase совсем не сложно:

1. Создаем проект в Firebase (нужно иметь для этого Google аккаунт):

![](https://static.tildacdn.com/tild3930-3536-4838-b037-366464643634/image1.png)

2. Подключаем свое приложение, следуя инструкциям:

![](https://static.tildacdn.com/tild6362-3238-4561-a133-323065663037/image2.png)

3. Здесь нам нужно подключить Authentication, выбрать способ авторизации: Email/Password.


![](https://static.tildacdn.com/tild3338-6265-4864-b437-313532373631/image3.png)

![](https://static.tildacdn.com/tild3536-3536-4536-b262-356434663435/image4.png)

![](https://static.tildacdn.com/tild6332-3761-4264-a466-613662633437/image5.png)

Импортируем Authentication SDK в gradle файле: implementation("com.google.firebase:firebase-auth")

4. Подключаем Realtime database.

![](https://static.tildacdn.com/tild6537-3830-4237-b966-366237383062/image6.png)

![](https://static.tildacdn.com/tild6539-6661-4532-b337-653133363432/image7.png)


Импортируем realtime database sdk в gradle файл:

implementation("com.google.firebase:firebase-database")

5. Подключаем Storage.

![](https://static.tildacdn.com/tild6364-6638-4761-a261-343238303033/image81.png)

![](https://static.tildacdn.com/tild6262-3635-4066-a666-653131303536/image82.png)

![](https://static.tildacdn.com/tild3364-6365-4638-b366-303735346338/image8.png)

Импортируем storage sdk в gradle файл:

implementation("com.google.firebase:firebase-storage")

Подключение Firebase Cloud Messaging (для пуш уведомлений):

Для подключения к FCM понадобится авторизационный ключ, здесь мы продемонстрируем, где его можно получить, а применить его - уже Ваша задача.


![](https://static.tildacdn.com/tild6335-3563-4333-a233-636130656164/image9.png)

![](https://static.tildacdn.com/tild6538-3939-4230-a339-366338326466/image10.png)


Включаем, следуя инструкциям, и по возвращению видим ключ:

https://static.tildacdn.com/tild3562-3061-4437-a135-303137663165/image11.png


Задание:

При первом входе в приложение, пользователя должен встречать экран авторизации:

![](https://static.tildacdn.com/tild3964-6235-4035-b337-626338666431/image12.png)

(рис. 1: первый экран авторизации)

![](https://static.tildacdn.com/tild6432-3035-4839-b335-336139323338/image13.png)

(рис. 2: основной экран авторизации)

Если у пользователя аккаунта нет, то по нажатию на поле “Зарегистрироваться”, он переходит на экран регистрации.

Помимо всего, если пользователь забыл пароль от аккаунта, то он должен иметь возможность его восстановить. Firebase позволяет осуществить функцию восстановления пароля с помощью письма на Email. Экран восстановления пароля должен выглядеть следующим образом:

![](https://static.tildacdn.com/tild6235-6634-4830-a563-333139653039/image14.png)

(рис. 3: экран восстановления пароля)

Экран авторизации появляется ТОЛЬКО при первом входе в приложении, после вход должен выполняться автоматически.

![](https://static.tildacdn.com/tild6637-3766-4562-b136-666465643730/image15.png)

(рис. 4: главный экран: чаты)

На главном экране у нас расположен фрагмент со списком чатов и фрагмент с пользователями, которые переключаются при помощи TabLayout. Списки реализованы при помощи RecyclerView. В фрагменте со списком пользователей присутствует поиск, позволяющий искать пользователей по никнейму. Поиск реализован при помощи EditText.

![](https://static.tildacdn.com/tild3730-3035-4862-a330-613830353130/image16.png)

(рис. 5: главный экран: пользователи)

В Action bar присутствует меню, с помощью которого можно: перейти на экран редактирования своего профиля, посмотреть информацию о приложении (необязательно), выйти из аккаунта.

![](https://static.tildacdn.com/tild6130-3530-4437-b832-626637383864/image17.png)

(рис. 6: главный экран: меню)

При нажатии на “Профиль”, мы переходим на активити, где профиль можно отредактировать. Оно должен выглядеть следующим образом:

![](https://static.tildacdn.com/tild3163-3332-4461-a264-633437623666/image18.png)

(рис. 7: редактирование профиля)

Здесь 5 полей EditText, в которые пользователь может по желанию ввести свои данные. При нажатии на кнопку сохранить, данные сохраняются и становятся видны остальным пользователям. Так же пользователь может прикрепить свой номер телефона в диалоговом окне, которое вызывается при нажатии на кнопку с иконкой телефона.

![](https://static.tildacdn.com/tild3830-3735-4463-b036-353830646434/image19.png)

(рис. 8: прикрепление номера)

При нажатии на ImageView аватарки, пользователь переходит на активити, где можно ее сменить.

![](https://static.tildacdn.com/tild3062-3531-4365-b332-316561646166/image20.png)

(рис. 9: смена аватарки)

В ImageView отображается текущий аватар пользователя. При нажатии на кнопку “Выбрать изображение” пользователю предоставляется выбор: выбрать изображение из галереи или сделать с помощью камеры.

![](https://static.tildacdn.com/tild3965-6339-4864-b737-363339396266/image21.png)

(рис. 10: смена аватраки)

При нажатии на кнопку “Применить изображение”, аватар меняется на сервере и становится виден всем пользователям.

Вернемся к главному экрану. При нажатии на item чата в списке чатов или на item пользователя в списке пользователей открывается чат с выбранным пользователем. Экран с чатом должен выглядеть так:

![](https://static.tildacdn.com/tild6337-3839-4739-b437-383465633764/image22.png)

(рис. 11: чат с пользователем)

Внизу расположено поле EditText для ввода сообщения и две кнопки: кнопка отправки сообщения и кнопка для прикрепления фото. При нажатии на кнопку для прикрепления фото открывается галерея, откуда пользователь может выбрать фото. При нажатии на кнопку отправки, сообщение отправляется другому пользователю. Сам чат реализован при помощи RecyclerView. При нажатии на сообщение, высвечивается диалоговое окно, где пользователю предлагается удалить сообщение, если он того хочет.

![](https://static.tildacdn.com/tild6562-3336-4463-b939-303230386135/image23.png)

(рис. 12: при нажатии на сообщение)

При нажатии на изображение, отправленное кем-либо из собеседников, помимо удаления предлагается посмотреть изображение в полном виде.

![](https://static.tildacdn.com/tild6338-6536-4165-a162-623335396337/image24.png)

(рис. 13: при нажатии на изображение)

![](https://static.tildacdn.com/tild6432-6162-4665-b962-623661633235/image25.png)

(рис. 14: просмотр изображения в полном размере)

В ActionBar присутствует меню, в котором есть опция “Посетить профиль”. При нажатии на эту опцию открывается профиль пользователя, с информацией о нем. Внизу находятся кнопки “Позвонить” и “Отправить SMS”. При нажатии на кнопку “Позвонить” приложение перебрасывает пользователя на стандартное приложение “Телефон”. При нажатии на кнопку “Отправить SMS” приложение перебрасывает пользователя в стандартное приложение “Сообщения”. Однако, стоит учесть, что эти редиректы происходят только в том случае, если тот пользователь, чей профиль мы просматриваем, указал свой номер.

![](https://static.tildacdn.com/tild3732-3133-4531-a564-393834366361/image26.png)

(рис. 15: опция “Посетить профиль”)

![](https://static.tildacdn.com/tild3733-3164-4336-b334-653633656435/image27.png)

(рис. 16: опция “Просмотр чужого профиля”)